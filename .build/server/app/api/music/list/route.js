"use strict";(()=>{var e={};e.id=884,e.ids=[884],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},2048:e=>{e.exports=require("fs")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},4788:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>_,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>x});var a={};r.r(a),r.d(a,{GET:()=>l,dynamic:()=>p});var i=r(9182),s=r(2007),n=r(6719),o=r(3442),u=r(5970),c=r(5206);let p="force-dynamic";async function l(){try{let e=await u._.music.findMany({orderBy:{createdAt:"desc"}}),t=await Promise.all(e.map(async e=>{let t=await (0,c.qm)(e.cloud_storage_path),r=e.cover_image_path?await (0,c.qm)(e.cover_image_path):null;return{id:e.id,title:e.title,artist:e.artist,url:t,coverUrl:r,duration:e.duration}}));return o.NextResponse.json({musics:t})}catch(e){return console.error("List error:",e),o.NextResponse.json({error:"Erro ao listar m\xfasicas"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/music/list/route",pathname:"/api/music/list",filename:"route",bundlePath:"app/api/music/list/route"},resolvedPagePath:"/home/ubuntu/antonio_garcia_landing/nextjs_space/app/api/music/list/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:y}=d,_="/api/music/list/route";function w(){return(0,n.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:x})}},5970:(e,t,r)=>{r.d(t,{_:()=>i});let a=require("@prisma/client"),i=globalThis.prisma??new a.PrismaClient},5206:(e,t,r)=>{r.d(t,{_I:()=>p,qm:()=>c,cT:()=>u});let a=require("@aws-sdk/client-s3");var i=r(5588);let s=new a.S3Client({}),{bucketName:n,folderPrefix:o}={bucketName:process.env.AWS_BUCKET_NAME,folderPrefix:process.env.AWS_FOLDER_PREFIX||""};async function u(e,t,r="audio/mpeg"){let i=`${o}music/${Date.now()}-${t}`;return await s.send(new a.PutObjectCommand({Bucket:n,Key:i,Body:e,ContentType:r})),i}async function c(e,t=3600){let r=new a.GetObjectCommand({Bucket:n,Key:e});return await (0,i.e)(s,r,{expiresIn:t})}async function p(e){await s.send(new a.DeleteObjectCommand({Bucket:n,Key:e}))}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[372,235],()=>r(4788));module.exports=a})();