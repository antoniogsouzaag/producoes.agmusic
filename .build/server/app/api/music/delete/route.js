"use strict";(()=>{var e={};e.id=970,e.ids=[970],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},2048:e=>{e.exports=require("fs")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},5199:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>w,staticGenerationAsyncStorage:()=>f});var n={};r.r(n),r.d(n,{DELETE:()=>p,dynamic:()=>d});var s=r(9303),a=r(8716),o=r(670),i=r(7070),u=r(2663),c=r(6497);let d="force-dynamic";async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return i.NextResponse.json({error:"ID da m\xfasica n\xe3o fornecido"},{status:400});let n=await u._.music.findUnique({where:{id:parseInt(r)}});if(!n)return i.NextResponse.json({error:"M\xfasica n\xe3o encontrada"},{status:404});return await (0,c._I)(n.cloud_storage_path),await u._.music.delete({where:{id:parseInt(r)}}),i.NextResponse.json({success:!0})}catch(e){return console.error("Delete error:",e),i.NextResponse.json({error:"Erro ao deletar m\xfasica"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/music/delete/route",pathname:"/api/music/delete",filename:"route",bundlePath:"app/api/music/delete/route"},resolvedPagePath:"/home/ubuntu/code_artifacts/producoes.agmusic/app/api/music/delete/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:w}=l,x="/api/music/delete/route";function h(){return(0,o.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:f})}},2663:(e,t,r)=>{r.d(t,{_:()=>s});let n=require("@prisma/client"),s=globalThis.prisma??new n.PrismaClient},6497:(e,t,r)=>{r.d(t,{_I:()=>d,qm:()=>c,cT:()=>u});let n=require("@aws-sdk/client-s3");var s=r(9710);let a=new n.S3Client({}),{bucketName:o,folderPrefix:i}={bucketName:process.env.AWS_BUCKET_NAME,folderPrefix:process.env.AWS_FOLDER_PREFIX||""};async function u(e,t,r="audio/mpeg"){let s=`${i}music/${Date.now()}-${t}`;return await a.send(new n.PutObjectCommand({Bucket:o,Key:s,Body:e,ContentType:r})),s}async function c(e,t=3600){let r=new n.GetObjectCommand({Bucket:o,Key:e});return await (0,s.e)(a,r,{expiresIn:t})}async function d(e){await a.send(new n.DeleteObjectCommand({Bucket:o,Key:e}))}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,97],()=>r(5199));module.exports=n})();