"use strict";(()=>{var e={};e.id=970,e.ids=[970],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},2048:e=>{e.exports=require("fs")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},1670:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var n={};r.r(n),r.d(n,{DELETE:()=>p,dynamic:()=>d});var a=r(9182),s=r(2007),i=r(6719),o=r(3442),u=r(5970),c=r(5206);let d="force-dynamic";async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return o.NextResponse.json({error:"ID da m\xfasica n\xe3o fornecido"},{status:400});let n=await u._.music.findUnique({where:{id:parseInt(r)}});if(!n)return o.NextResponse.json({error:"M\xfasica n\xe3o encontrada"},{status:404});return await (0,c._I)(n.cloud_storage_path),await u._.music.delete({where:{id:parseInt(r)}}),o.NextResponse.json({success:!0})}catch(e){return console.error("Delete error:",e),o.NextResponse.json({error:"Erro ao deletar m\xfasica"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/music/delete/route",pathname:"/api/music/delete",filename:"route",bundlePath:"app/api/music/delete/route"},resolvedPagePath:"/home/ubuntu/antonio_garcia_landing/nextjs_space/app/api/music/delete/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:f}=l,w="/api/music/delete/route";function h(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},5970:(e,t,r)=>{r.d(t,{_:()=>a});let n=require("@prisma/client"),a=globalThis.prisma??new n.PrismaClient},5206:(e,t,r)=>{r.d(t,{_I:()=>d,qm:()=>c,cT:()=>u});let n=require("@aws-sdk/client-s3");var a=r(5588);let s=new n.S3Client({}),{bucketName:i,folderPrefix:o}={bucketName:process.env.AWS_BUCKET_NAME,folderPrefix:process.env.AWS_FOLDER_PREFIX||""};async function u(e,t,r="audio/mpeg"){let a=`${o}music/${Date.now()}-${t}`;return await s.send(new n.PutObjectCommand({Bucket:i,Key:a,Body:e,ContentType:r})),a}async function c(e,t=3600){let r=new n.GetObjectCommand({Bucket:i,Key:e});return await (0,a.e)(s,r,{expiresIn:t})}async function d(e){await s.send(new n.DeleteObjectCommand({Bucket:i,Key:e}))}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[372,235],()=>r(1670));module.exports=n})();